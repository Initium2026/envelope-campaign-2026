<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç«¯å‚³åª’æ–°æ˜¥é™å®šï½œæ˜¥ç¯€æŠ½ç´…åŒ…æ´»å‹•</title>
    <style>
        /* --- è¦–è¦ºåŸºèª¿è¨­å®š --- */
        :root {
            --primary-bg: #FFE7DB;   /* ä¿®æ”¹é€™è£¡ï¼šç¶²é ä¸»èƒŒæ™¯è‰² */
            --accent-1: #FFCAAF;      /* ä¿®æ”¹é€™è£¡ï¼šè¼”åŠ©æš–è‰²ï¼ˆç”¨æ–¼æ¼¸å±¤åº•éƒ¨ï¼‰ */
            --accent-2: #000000;      /* æ–‡å­—/ç·šæ¢ï¼šç´”é»‘ */
            --gold-1: #2F4157; 
            --gold-2: #EBD8AD;        /* æ·ºé‡‘è‰² (ç”¨æ–¼æŒ‰éˆ•æ–‡å­—å’Œç¦å­—) */
            --gold-3: #16202B; 
            --text-color: #000000;
            --btn-text: #FFFFFF;
            --btn-bg: #F9544B;
            --font-serif: "jf-jinxuan-fresh-2.2", "Songti TC", "Noto Serif TC", "serif";
            --font-sans: "PingFang TC", "Microsoft JhengHei", sans-serif;
        }

        body, html {
            margin: 0; padding: 0; width: 100%; height: 100%;
            color: var(--text-color); font-family: var(--font-sans);
            overflow: hidden; background-color: var(--primary-bg);

            /* å¤šé‡èƒŒæ™¯è¨­å®š */
            background-image: 
            url('https://20260216-lucky-envelope.theinitium.com/bg-2.png'),
            radial-gradient(circle at 50% 40%, rgba(255, 255, 255, 0.4) 0%, transparent 70%),
            linear-gradient(180deg, #FFE7DB 0%, #FFCAAF 100%);
    
            background-repeat: repeat, no-repeat, no-repeat;
            background-size: 30px auto, auto, auto;
            background-attachment: fixed;
        }

        .top-logo { position: fixed; top: 24px; left: 24px; z-index: 100; width: 48px; }
        .top-logo img { width: 100%; display: block; filter: brightness(0.2); }

        .container { position: relative; width: 100%; height: 100vh; display: flex; flex-direction: column; overflow-y: auto; scrollbar-width: none; box-sizing: border-box; }
        .container::-webkit-scrollbar { display: none; }

        /* 1. å®šç¾©é¦¬å…’çš„å‹•æ…‹æ•ˆæœ */
        @keyframes horseMotion {
            0%, 100% { transform: translateY(0) rotate(0deg); }
            25% { transform: translateY(-10px) rotate(-3deg); }
            50% { transform: translateY(0) rotate(0deg); }
            75% { transform: translateY(-5px) rotate(3deg); }
        }

        /* 2. å·¦ä¸‹è§’é¦¬å…’ */
        .bottom-left-image {
            position: fixed;
            bottom: 20px;
            left: 20px;
            width: 250px;
            height: auto;
            z-index: 8;
            pointer-events: none;
            animation: horseMotion 3s ease-in-out infinite;
            transform-origin: bottom center;
        }

        /* 3. å³ä¸‹è§’é¦¬å…’ */
        .bottom-right-image {
            position: fixed;
            bottom: 20px;
            right: 20px;
            width: 250px;
            height: auto;
            z-index: 8;
            pointer-events: none;
            transform: scaleX(-1);
            animation: horseMotion 3s ease-in-out infinite;
            transform-origin: bottom center;
        }

        /* --- é é¢å…±åŒæ¨£å¼ --- */
        .page { display: none; flex-direction: column; align-items: center; justify-content: center; padding: 60px 20px; text-align: center; min-height: 100%; box-sizing: border-box; z-index: 10; width: 100%; }
        .page.active { display: flex !important; }
        .font-serif { font-family: var(--font-serif); }
        
        .torn-label {
            font-family: var(--font-serif);
            font-size: 1.5rem;
            letter-spacing: 0.1em;
            margin-bottom: 2rem;
            padding: 4px 12px;
            border-bottom: 2px solid var(--accent-2);
            opacity: 0.9;
        }

        h1.main-title { font-size: 2.5rem; font-weight: 700; line-height: 1.5; letter-spacing: 0.25em; color: var(--accent-2); margin: 0; }
        @media (min-width: 768px) { h1.main-title { font-size: 4.5rem; } }

        p.subtitle {
            font-family: var(--font-serif);
            font-size: 1.1rem;
            color: var(--accent-2);
            margin-top: 3rem;
            margin-bottom: 40px;
            letter-spacing: 2px;
            line-height: 1.8;
            font-weight: 400;
        }

        /* --- æŒ‰éˆ•æ¨£å¼ --- */
        .btn { background: var(--btn-bg); border: 0px solid var(--accent-2); color: var(--btn-text); padding: 14px 60px; font-size: 1.1rem; cursor: pointer; border-radius: 50px; transition: all 0.4s cubic-bezier(0.165, 0.84, 0.44, 1); text-decoration: none; letter-spacing: 3px; font-weight: bold; box-shadow: 0 4px 15px rgba(0,0,0,0.2); }
        .btn:hover { background: #16202B; color: #fff; box-shadow: 0 6px 20px rgba(0,0,0,0.4); transform: translateY(-2px); }

        /* --- ç¬¬ä¸€é ï¼šç´…åŒ…è£é£¾ --- */
        .promo-envelope { 
            position: absolute; width: 110px; height: 220px; 
            background: linear-gradient(145deg, #A52A2A, #D43F3F); 
            border: 1px solid rgba(255,255,255,0.3); 
            box-shadow: 0 15px 35px rgba(0,0,0,0.2); 
            border-radius: 8px; 
            z-index: 2; overflow: hidden; pointer-events: none; 
        }
        .promo-envelope::before { 
            content: ""; position: absolute; top: 0; left: 0; width: 100%; height: 40%; 
            background: #B22222; clip-path: polygon(0 0, 100% 0, 100% 35%, 50% 100%, 0 35%); 
            z-index: 2; 
        }
        .promo-envelope::after {
            content: "ç¦"; position: absolute;
            left: 50%; transform: translateX(-50%); top: 28%; 
            color: var(--gold-2); font-family: var(--font-serif);
            font-size: 1.3rem; font-weight: bold;
            text-shadow: 0 1px 1px rgba(0,0,0,0.2);
            z-index: 3;
        }
        .seigaiha-decor {
            position: absolute; bottom: 0; width: 60px; height: 60px;
            opacity: 0.5; z-index: 1; pointer-events: none;
            background-image: url("data:image/svg+xml,%3Csvg width='20' height='20' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' stroke='%23EBD8AD' stroke-width='1'%3E%3Cpath d='M0 20 A 10 10 0 0 1 20 20' /%3E%3Cpath d='M2 20 A 8 8 0 0 1 18 20' /%3E%3Cpath d='M4 20 A 6 6 0 0 1 16 20' /%3E%3Cpath d='M-10 10 A 10 10 0 0 1 10 10' /%3E%3Cpath d='M-8 10 A 8 8 0 0 1 8 10' /%3E%3Cpath d='M-6 10 A 6 6 0 0 1 6 10' /%3E%3Cpath d='M10 10 A 10 10 0 0 1 30 10' /%3E%3Cpath d='M12 10 A 8 8 0 0 1 28 10' /%3E%3Cpath d='M14 10 A 6 6 0 0 1 26 10' /%3E%3C/g%3E%3C/svg%3E");
        }
        .pos-bottom-right { right: 0; -webkit-mask-image: linear-gradient(135deg, transparent 0%, black 60%); border-bottom-right-radius: 8px; }
        .pos-bottom-left { left: 0; -webkit-mask-image: linear-gradient(-135deg, transparent 0%, black 60%); border-bottom-left-radius: 8px; }

        .env-left { left: 8%; top: 35%; animation: envelopeFloatLeft 4.5s ease-in-out infinite; }
        .env-right { right: 8%; top: 10%; animation: envelopeFloatRight 4.5s ease-in-out infinite; animation-delay: -2.25s; }
        @keyframes envelopeFloatLeft { 0%, 100% { transform: translateY(0) rotate(-10deg); } 50% { transform: translateY(-25px) rotate(-13deg); } }
        @keyframes envelopeFloatRight { 0%, 100% { transform: translateY(0) rotate(10deg); } 50% { transform: translateY(-25px) rotate(13deg); } }

        /* --- å•ç­”é  --- */
        .question-box { width: 100%; max-width: 800px; margin-top: 30px; }
        #quiz-question-text { line-height: 1.6; max-width: 800px; margin: 0 auto 2rem auto; font-size: 1.5rem; color: var(--accent-2); text-align: center !important; }
        .option { display: block; width: 100%; max-width: 500px; background: rgba(0, 0, 0, 0.05); border: 1px solid rgba(0, 0, 0, 0.3); padding: 18px 25px; margin: 12px auto; cursor: pointer; transition: all 0.3s ease; border-radius: 4px; text-align: left !important; font-size: 1.05rem; color: var(--accent-2); box-sizing: border-box; }
        .option:hover { background: rgba(0, 0, 0, 0.1); border-color: var(--accent-2); }

        /* --- ç¬¬ 5 é ï¼šç´…åŒ…ç‰† --- */
        .envelope-container { display: flex !important; flex-direction: row !important; justify-content: center !important; align-items: center !important; gap: 20px !important; height: 380px; width: 100%; position: relative; margin-top: -60px; overflow: visible !important; }
        .envelope-wrapper { position: relative !important; width: 110px !important; height: 230px !important; display: flex !important; justify-content: center !important; align-items: center !important; cursor: pointer; transition: all 0.4s ease; z-index: 10; }
        .envelope { width: 100px !important; height: 220px !important; position: relative; background: linear-gradient(145deg, #A52A2A, #D43F3F); color: #EBD8AD !important; border: 1px solid rgba(255,255,255,0.3) !important; box-shadow: 0 8px 25px rgba(0,0,0,0.3); border-radius: 8px !important; display: flex !important; align-items: center !important; justify-content: center !important; overflow: hidden; }
        .envelope::before { content: ""; position: absolute; top: 0; left: 0; width: 100%; height: 40%; background: #B22222; clip-path: polygon(0 0, 100% 0, 100% 35%, 50% 100%, 0 35%); z-index: 2; }
        .envelope span { margin-top: 85px; z-index: 1; position: relative; writing-mode: vertical-rl; text-orientation: upright; font-size: 1.4rem; letter-spacing: 2px; font-family: var(--font-serif); }
        .envelope-wrapper:hover { z-index: 100 !important; transform: translateY(-30px) scale(1.05) !important; }

        /* --- ç¬¬ 6 é ï¼šå»¶ä¼¸é–±è®€ --- */
        .exhibition-wrapper { display: flex; flex-direction: row; gap: 40px; padding: 0 40px; margin-bottom: 20px; overflow-x: auto; justify-content: center; width: 100%; }
        .exhibition-item { flex: 0 0 300px; background: rgba(0, 0, 0, 0.05); padding: 0 0 25px 0; border-left: 2px solid var(--accent-2); overflow: hidden; display: flex; flex-direction: column; box-sizing: border-box; z-index: 10; position: relative; text-align: left !important; }
        .exhibition-img { width: calc(100% - 32px); margin: 16px auto 12px auto; height: 160px; object-fit: cover; display: block; border: 0.5px solid var(--accent-2); opacity: 0.9; box-sizing: border-box; }
        .exhibition-item h3 { padding: 0 24px; margin: 0 0 8px 0 !important; color: var(--accent-2); font-size: 1.1rem; text-align: left !important; }
        .exhibition-item p { padding: 0 24px; margin: 0 0 15px 0 !important; font-size: 0.9rem; opacity: 0.8; line-height: 1.6; flex-grow: 1; color: var(--accent-2); text-align: left !important; }
        .exhibition-item .btn { padding: 8px 20px !important; font-size: 0.85rem !important; width: fit-content !important; align-self: flex-start !important; margin-left: 24px !important; border-radius: 50px; background: var(--accent-2) !important; color: #FFFFFF !important; }

        /* --- POP-UP å½ˆçª— --- */
        .overlay { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(255, 231, 219, 0.95); justify-content: center; align-items: center; z-index: 10000; backdrop-filter: blur(5px); }
        .popup { background: #fff; padding: 40px 30px; border: 2px solid var(--accent-2); text-align: center; width: 85%; max-width: 420px; color: var(--accent-2); display: flex; flex-direction: column; align-items: center; }
        #result-title { font-size: 2rem; margin: 0 0 15px 0; color: var(--accent-2); letter-spacing: 2px; }
        #result-subtitle { font-size: 1.1rem; margin-bottom: 15px; line-height: 1.5; color: var(--accent-2); font-weight: 500; }
        #result-code { font-family: monospace; font-size: 1rem; color: #A52A2A; border: 1px dashed #A52A2A; padding: 5px 15px; margin-bottom: 25px; letter-spacing: 1px; background: rgba(165, 42, 42, 0.05); }

        /* æŒ‰éˆ•å®¹å™¨ */
        .action-area {
         display: flex;
         gap: 20px;
         justify-content: center;
         align-items: center;
         margin-top: 0px;
         margin-bottom: 30px;
         width: 100%;
         flex-wrap: wrap;
        }

        .action-area .btn {
         min-width: 180px;
         padding: 10px 30px !important;
        }

        /* --- æ‰‹æ©Ÿç‰ˆé©é… --- */
        @media (max-width: 900px) {
            .page { padding: 40px 15px; }
            .promo-envelope { display: block !important; width: 70px; height: 140px; z-index: 1 !important; }
            .env-left { left: -10px; top: 18%; }
            .env-right { right: -10px; top: auto !important; bottom: 20%; }
            .torn-label, h1.main-title, p.subtitle, .btn { position: relative; z-index: 10; }
            h1.main-title { font-size: 2rem; margin-top: 50px !important; }
            .torn-label { font-size: 1.2rem !important; }
            .subtitle { font-size: 1rem; margin-top: 1.5rem; }
            .btn { font-size: 1rem !important; padding: 10px 40px !important; }
            .envelope-container { flex-wrap: wrap; height: auto; margin-top: 10px; gap: 15px !important; padding-bottom: 40px; }
            .envelope-wrapper { width: 45%; height: 180px !important; }
            .envelope span { margin-top: 55px; font-size: 1.2rem; }
            #page5 h1 { margin-top: 50px !important; font-size: 1.6rem !important; width: 100%; }
            .exhibition-wrapper { flex-direction: row !important; flex-wrap: nowrap !important; overflow-x: auto !important; justify-content: flex-start !important; gap: 20px !important; -webkit-overflow-scrolling: touch; scroll-snap-type: x mandatory; }
            .exhibition-item { flex: 0 0 85% !important; max-width: 320px !important; scroll-snap-align: center; }
            .popup { width: 85% !important; max-width: 360px !important; border-radius: 12px; }

            .bottom-left-image {
                width: 150px;
                bottom: 10px;
                left: 10px;
                animation: horseMotion 2.5s ease-in-out infinite;
            }

            .bottom-right-image {
                width: 150px;
                bottom: 10px;
                right: 10px;
                transform: scaleX(-1);
                animation: horseMotion 2.5s ease-in-out infinite;
            }

            #page6 h2 {
                font-size: 1.8rem !important; 
            }
        }
    </style>
</head>
<body>

    <a href="https://theinitium.com" target="_blank" class="top-logo">
        <img src="https://theinitium.com/content/images/2026/01/hdd08DDc54kegIlNbgAzfOQUQnjNW11bAafjZAZ6.png" alt="Initium Logo">
    </a>

    <img src="https://20260216-lucky-envelope.theinitium.com/horse-1.png" class="bottom-left-image" alt="å·¦å´è£é£¾é¦¬">
    <img src="https://20260216-lucky-envelope.theinitium.com/horse-2.png" class="bottom-right-image" alt="å³å´è£é£¾é¦¬">

    <div class="container">
        <div id="page1" class="page active">
            <div class="promo-envelope env-right"><div class="seigaiha-decor pos-bottom-left"></div></div>
            
            <div class="torn-label font-serif">ç«¯å‚³åª’æ–°æ˜¥é™å®š</div>
            <h1 class="main-title font-serif">å¥½é‹åŠ ç¢¼æŠ½ç´…åŒ…</h1>
            <p class="subtitle">2026/2/16 - 2/22<br>å®Œæˆ 3 é¡Œå•ç­”ï¼Œå³å¯ç²å¾— 1 æ¬¡æŠ½çæ©Ÿæœƒ<br>æœ€å¤§ç <span style="color: #F9544B; font-weight: bold;">æŠ˜æŠµHK$500ç«¯å‚³åª’ç·šä¸Šå•†åº—å…å–®åˆ¸</span> ç­‰ä½ æŠ½</p>
            <button class="btn" onclick="startChallenge()">ç«‹å³æŠ½ç´…åŒ…</button>
        </div>

        <div id="quiz-page" class="page">
            <p id="quiz-progress" style="letter-spacing: 3px; opacity: 0.6; font-size: 0.8rem;">QUESTION 01 / 03</p>
            <div class="question-box">
                <h2 id="quiz-question-text" class="font-serif">åŠ è¼‰ä¸­...</h2>
                <div id="quiz-options-container"></div>
            </div>
        </div>

        <div id="page5" class="page">
            <h1 class="font-serif" style="font-size: 2.2rem; letter-spacing: 4px; color: var(--btn-bg);">ç«‹å³è©¦æ‰‹æ°£ï¼Œé¸ä¸€å€‹ç´…åŒ…</h1>
            <p class="subtitle" style="margin-top: 1rem; margin-bottom: 20px;">é™é‡1,000ä»½æ–°æ˜¥å¥½ç¦®ç­‰ä½ æŠ½ï¼Œæœ€é«˜æŠ½æŠ˜æŠµHK$500ç«¯å‚³åª’ç·šä¸Šå•†åº—å…å–®åˆ¸</p>
            <div class="envelope-container">
                <div class="envelope-wrapper" onclick="drawPrize()"><div class="envelope"><span>é¦¬ä¸Šç™¼è²¡</span></div></div>
                <div class="envelope-wrapper" onclick="drawPrize()"><div class="envelope"><span>é¦¬ä¸Šæœ‰éŒ¢</span></div></div>
                <div class="envelope-wrapper" onclick="drawPrize()"><div class="envelope"><span>é¦¬ä¸Šå¯Œæœ‰</span></div></div>
                <div class="envelope-wrapper" onclick="drawPrize()"><div class="envelope"><span>é¦¬ä¸Šäº«å—</span></div></div>
                <div class="envelope-wrapper" onclick="drawPrize()"><div class="envelope"><span>é¦¬ä¸Šå¿«æ¨‚</span></div></div>
            </div>
        </div>

        <div id="page6" class="page">
            <h2 class="font-serif" style="color:var(--accent-2); letter-spacing: 2px; margin-bottom: 0px; font-size: 2.2rem;"><span style="color: #F9544B;">æ˜¥ç¯€é™æ™‚å…è²»è®€</span></h2>
            <p class="font-serif" style="font-size: 1.1rem; color: var(--accent-2); margin-bottom: 30px; letter-spacing: 1px; opacity: 0.8;">
        ç«¯å‚³åª’å¾æƒ…äººç¯€é–‹å§‹ï¼Œç·Šæ¥å¹´å»¿å…«åˆ°å¤§å¹´åˆäº”ã€é€£çºŒå…«å¤©æ¯å¤©æ¨å‡ºä¸€ç¯‡å…è²»é–±è®€æ–‡ç« ï¼Œé™ªä¼´ä½ éå¹´
    </p>
            <div class="exhibition-wrapper">
                <div class="exhibition-item">
                    <img src="https://20260216-lucky-envelope.theinitium.com/article-1.webp" class="exhibition-img">
                    <h3>å¾æ©è—åˆ°æ“æŠ±â”€â”€å…«ä»™ç„šèº«åå¹´ï¼Œå¥¹å€‘èˆ‡ç–¤ç—•ä¸€èµ·æˆé•·çš„æ„›æƒ…</h3>
                    <p>ã€Œå…«ä»™å°æˆ‘å€‘ä¾†èªªï¼Œä¸åªæ˜¯æˆ‘ä¸€å€‹äººçš„å‰µå‚·ï¼Œä¹Ÿæ˜¯ä»–çš„ã€‚ã€</p>
                    <a href="https://theinitium.com/20250718-taiwan-dust-fire-ten-years-love/" target="_blank" class="btn">é™æ™‚å…è²»è®€</a>
                </div>
                <div class="exhibition-item">
                    <img src="https://20260216-lucky-envelope.theinitium.com/article-2.jpg" class="exhibition-img">
                    <h3>ç«™åœ¨å„è‡ªçš„ç«ç·šä¸Šï¼Œæœ›å‘å½¼æ­¤ï¼šå°ç£Zä¸–ä»£å¥³æ€§çš„å…¬å…±ç™¼è²ç¾å ´</h3>
                    <p>ã€Œåªè¦æŒçºŒå…¬å…±åƒèˆ‡ï¼Œå¥³æ€§å°±æœƒä¸€ç›´é‡åˆ°æ€§åˆ¥å•é¡Œã€‚ã€</p>
                    <a href="https://theinitium.com/20260121-taiwan-genz-women-speaking-out/" target="_blank" class="btn">é™æ™‚å…è²»è®€</a>
                </div>
                <div class="exhibition-item">
                    <img src="https://20260216-lucky-envelope.theinitium.com/article-3.webp" class="exhibition-img">
                    <h3>è©•è«–ï½œ äººé¡å‘½é‹ä¸å…±åŒ</h3>
                    <p>äººé¡å‘½é‹å…±åŒé«”åƒ…åƒ…é—œä¹æ–¼ä¸€å€‹æƒ³è±¡ä¸­çš„äººé¡ã€‚</p>
                    <a href="https://theinitium.com/20250904-opinion-human-community-and-world/" target="_blank" class="btn">é™æ™‚å…è²»è®€</a>
                </div>
            </div>
            <div class="action-area">
                <a href="https://theinitium.com/tag/2026-lunar-new-year/" target="_blank" class="btn">çœ‹æ›´å¤šé™æ™‚å…è²»å ±å°</a>
                <a href="https://theinitium.com/20260216-lucky-envelope/" target="_blank" class="btn">æŸ¥çœ‹æ´»å‹•è¾¦æ³•</a>
            </div>
        </div>
    </div>

    <div id="overlay" class="overlay">
        <div class="popup">
            <h2 id="result-title" class="font-serif"></h2>
            <div id="result-subtitle"></div>
            <div id="result-code"></div>
            <button class="btn" onclick="switchPage('page6'); document.getElementById('overlay').style.display='none';">é–±è®€é™æ™‚å…è²»æ–‡ç« </button>
        </div>
    </div>

    <script>
        const quizData = [
            { "q": "2026å¹´æ­²æ¬¡æ˜¯ä»€éº¼ï¼Ÿ", "a": ["é¾å¹´", "è›‡å¹´", "é¦¬å¹´", "ç¾Šå¹´"], "correct": 2 },
            { "q": "ä»¥ä¸‹å°æ–¼ç«¯å‚³åª’çš„æ•˜è¿°ï¼Œå“ªä¸€å€‹ä¸æ˜¯æ­£ç¢ºçš„ï¼Ÿ", "a": ["é‚å‘æˆç«‹ç¬¬11å¹´", "ç«¯çš„è®€è€…éå¸ƒå…¨çƒ100+å€‹åœ‹å®¶èˆ‡åœ°å€", "2025å¹´æ¦®ç²29é …æ–°èç", "ä»¥ä¸Šçš†æ˜¯"], "correct": 3 },
            { "q": "å“ªä¸€ä½ä¸æ˜¯ç«¯å‚³åª’ã€Œæœªå®Œçµç¾å ´ã€è¨ˆç•«çš„å…±åŒç­–å±•äººï¼Ÿ", "a": ["è¨˜è€…å³æ”¿éœ†", "ç·¨è¼¯è¨±ä¼¯å´§", "ç·¨è¼¯ææ…§ç­ ", "ä»¥ä¸Šçš†æ˜¯"], "correct": 3 }
        ];

        const prizeConfig = [
            { id: 1, title: "ï½œé‡‘é¦¬çï½œ", subtitle: "ç·šä¸Šå•†åº—å…å–®åˆ¸ï¼ˆæœ€é«˜æŠ˜ HK$500ï¼‰", code: "6HR6517Q2807" },
            { id: 2, title: "ï½œé‡‘å–œçï½œ", subtitle: "ç·šä¸Šå•†åº—å…¨å–® 8 æŠ˜åˆ¸", code: "MV4RXJPA6B1H" },
            { id: 3, title: "ï½œé–‹æ˜¥çï½œ", subtitle: "ç·šä¸Šå•†åº— HK$80 æŠ˜åƒ¹åˆ¸<br>ï¼ˆæ¶ˆè²»æ»¿HK$400 æ‰èƒ½ä½¿ç”¨ï¼‰", code: "M19F3350VAYE" },
            { id: 4, title: "ï½œå¥½é‹çï½œ", subtitle: "ç·šä¸Šå•†åº— 9 æŠ˜åˆ¸", code: "X9XFA4PRF03E" },
            { id: 5, title: "ï½œéš¨å–œçï½œ", subtitle: "ç·šä¸Šå•†åº— 95 æŠ˜åˆ¸", code: "21DM9Q0G83SE" }
        ];

        let prizePool = [...prizeConfig];

        function getStoredPool() {
            // ä¿®æ”¹äº† key name (åŠ ä¸Š _final_v2) ç¢ºä¿çæ± é‡æ–°åˆå§‹åŒ–
            let pool = localStorage.getItem('prize_pool_status_2026_final_v2');
            if (!pool) {
                // é€™è£¡è¨­å®šç‚º [1, 2]ï¼Œä»£è¡¨é‡‘é¦¬ç(1) èˆ‡ é‡‘å–œç(2) å„ 1 å€‹
                const initialPool = [1, 2];
                localStorage.setItem('prize_pool_status_2026_final_v2', JSON.stringify(initialPool));
                return initialPool;
            }
            return JSON.parse(pool);
        }

        function drawPrize() {
            // ä¿®æ”¹ key name ç‚º 'drawn_prize_2026_final_v2'ï¼Œå¼·åˆ¶ç€è¦½å™¨è¦–ç‚ºæ–°æ´»å‹•
            if (localStorage.getItem('drawn_prize_2026_final_v2')) {
                showAlreadyPlayedPopup();
                return;
            }
            let currentPool = getStoredPool();
            if (currentPool.length === 0) {
                showEmptyPoolPopup();
                return;
            }
            const luckyIdx = Math.floor(Math.random() * currentPool.length);
            const winId = currentPool[luckyIdx];
            const win = prizeConfig.find(p => p.id === winId);

            document.getElementById('result-title').innerText = win.title;
            document.getElementById('result-subtitle').innerHTML = win.subtitle;
            const codeElem = document.getElementById('result-code');
            codeElem.innerText = win.code;
            codeElem.style.display = 'block';

            currentPool.splice(luckyIdx, 1);
            localStorage.setItem('prize_pool_status_2026_final_v2', JSON.stringify(currentPool));
            // å¯«å…¥æ–°çš„ key
            localStorage.setItem('drawn_prize_2026_final_v2', 'true');
            
            const btn = document.querySelector('#overlay .btn');
            if(btn) {
                btn.innerText = "é–±è®€é™æ™‚å…è²»æ–‡ç« ";
                btn.onclick = function() { switchPage('page6'); document.getElementById('overlay').style.display='none'; };
            }
            document.getElementById('overlay').style.display = 'flex';
        }

        function showEmptyPoolPopup() {
            document.getElementById('result-title').innerText = "ğŸ’¡æ´»å‹•æé†’ğŸ’¡";
            document.getElementById('result-subtitle').innerText = "è¬è¬ä½ çš„æ”¯æŒï¼ç´…åŒ…å·²ç¶“éƒ½æŠ½å®Œå›‰ï¼";
            document.getElementById('result-code').style.display = 'none';
            const btn = document.querySelector('#overlay .btn');
            if(btn) {
                btn.innerText = "é–±è®€é™æ™‚å…è²»æ–‡ç« ";
                btn.onclick = function() { switchPage('page6'); document.getElementById('overlay').style.display='none'; };
            }
            document.getElementById('overlay').style.display = 'flex';
        }

        function showAlreadyPlayedPopup() {
            document.getElementById('result-title').innerText = "ğŸ’¡æ´»å‹•æé†’ğŸ’¡";
            document.getElementById('result-subtitle').innerText = "æ¯äººåƒ…é™æŠ½çä¸€æ¬¡ï¼Œæ‚¨å·²ç¶“æŠ½éç´…åŒ…å›‰ï¼";
            document.getElementById('result-code').style.display = 'none';
            const btn = document.querySelector('#overlay .btn');
            if(btn) {
                btn.innerText = "é–±è®€é™æ™‚å…è²»æ–‡ç« ";
                btn.onclick = function() { switchPage('page6'); document.getElementById('overlay').style.display='none'; };
            }
            document.getElementById('overlay').style.display = 'flex';
        }

        let currentQuestions = []; let currentStep = 0;
        function switchPage(pageId) { 
            document.querySelectorAll('.page').forEach(p => p.classList.remove('active')); 
            const target = document.getElementById(pageId); 
            if(target) target.classList.add('active'); 
            document.querySelector('.container').scrollTop = 0; 
        }
        function startChallenge() { currentQuestions = [...quizData]; currentStep = 0; renderQuiz(); switchPage('quiz-page'); }
        function renderQuiz() {
            const data = currentQuestions[currentStep];
            document.getElementById('quiz-progress').innerText = `QUESTION 0${currentStep + 1} / 03`;
            document.getElementById('quiz-question-text').innerHTML = data.q; 
            const container = document.getElementById('quiz-options-container'); container.innerHTML = '';
            data.a.forEach((optionText, index) => {
                const div = document.createElement('div'); div.className = 'option'; div.innerText = `${String.fromCharCode(65 + index)}. ${optionText}`; div.onclick = () => handleAnswer(div, index, data.correct); container.appendChild(div);
            });
        }
        function handleAnswer(element, selectedIdx, correctIdx) {
            const allOptions = element.parentElement.querySelectorAll('.option');
            allOptions.forEach(opt => opt.style.pointerEvents = 'none');
            if (selectedIdx === correctIdx) element.style.background = "rgba(76, 175, 80, 0.2)";
            else element.style.background = "rgba(244, 67, 54, 0.2)";
            setTimeout(() => { if (currentStep < 2) { currentStep++; renderQuiz(); } else { switchPage('page5'); } }, 1000);
        }
    </script>
</body>
</html>
